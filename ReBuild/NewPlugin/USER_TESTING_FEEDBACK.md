# 用户测试反馈 - HBIM构件信息输入工具 v0.2.13.71

**测试日期**: [请填写测试日期]
**测试人**: [请填写测试者姓名]
**Archicad版本**: [请填写Archicad版本号]
**操作系统**: [macOS/Windows版本]

## 测试概述
本次测试针对 HBIM构件信息输入工具 v0.2.13.71，重点验证新增的用户体验改进功能：
- **工具提示系统**：禁用按钮的悬停提示
- **键盘快捷键**：编辑模式下的Ctrl+S保存、Escape取消
- **按钮状态管理**：照片按钮的正确启用/禁用状态
- **整体用户体验**：界面流畅性、易用性

## 1. 安装与启动测试

| 测试项目 | 测试结果 (✅/❌/⚠️) | 详细说明 | 截图/日志 |
|---------|-------------------|---------|----------|
| 插件安装位置正确 | | 插件应安装在 `~/Library/Application Support/GRAPHISOFT/ARCHICAD 29/Add-Ons/MergedPlugin.bundle/` | |
| 插件管理器显示正常 | | 在"文件→插件管理器"中能看到"NewPlugin"并已启用 | |
| 菜单项可用 | | "测试→NewPlugin"菜单项可用，点击后弹出插件面板 | |
| 面板初始显示 | | 面板标题显示"HBIM构件信息输入工具"，版本号显示"V0.2.13.71" | |

## 2. 工具提示系统测试

### 2.1 "选择照片"按钮工具提示
| 测试场景 | 预期结果 | 实际结果 | 问题描述 |
|---------|---------|---------|---------|
| 选择**没有GlobalId**的构件 | 按钮禁用，悬停显示："此功能需要构件具有GlobalId属性（IFC兼容构件）" | | |
| 选择**有GlobalId**的构件 | 按钮启用，无工具提示 | | |
| 从无GlobalId切换到有GlobalId | 按钮从禁用变为启用，工具提示消失 | | |
| 从有GlobalId切换到无GlobalId | 按钮从启用变为禁用，工具提示出现 | | |

### 2.2 "查看照片"按钮工具提示
| 测试场景 | 预期结果 | 实际结果 | 问题描述 |
|---------|---------|---------|---------|
| 构件无GlobalId | 按钮禁用，悬停显示："此功能需要构件具有GlobalId属性" | | |
| 构件有GlobalId但无照片 | 按钮启用，悬停显示："该构件暂无照片信息" | | |
| 构件有GlobalId且有照片 | 按钮启用，悬停显示："查看当前照片" | | |

**悬停测试方法**：将鼠标指针悬停在按钮上1-2秒，观察是否出现工具提示。

## 3. 键盘快捷键测试

### 3.1 编辑模式下的快捷键
| 快捷键 | 测试场景 | 预期结果 | 实际结果 | 问题描述 |
|-------|---------|---------|---------|---------|
| **Ctrl+S** (Windows) 或 **Cmd+S** (macOS) | 1. 进入编辑模式<br>2. 修改构件编号或照片说明<br>3. 按下快捷键 | 保存修改并退出编辑模式 | | |
| **Escape** | 1. 进入编辑模式<br>2. **未修改**任何内容<br>3. 按下Escape | 直接退出编辑模式，无确认对话框 | | |
| **Escape** | 1. 进入编辑模式<br>2. **修改**了内容（有未保存更改）<br>3. 按下Escape | 显示确认对话框："有未保存的更改。确认要放弃更改并退出编辑模式吗？" | | |
| **Escape** | 1. 确认对话框显示时<br>2. 再次按下Escape | 确认对话框应保持显示，不应重复触发 | | |

### 3.2 快捷键兼容性测试
| 测试项目 | 测试结果 | 说明 |
|---------|---------|------|
| 在输入框内按Ctrl+S | 应正常触发保存，而不是浏览器的"保存页面" | |
| 在非编辑模式下按Escape | 不应有任何特殊效果 | |
| 快捷键与浏览器默认快捷键冲突 | 应优先处理插件功能 | |

## 4. 按钮状态管理测试

### 4.1 编辑模式切换时的按钮状态
| 测试步骤 | 预期结果 | 实际结果 | 问题描述 |
|---------|---------|---------|---------|
| 1. 选择有GlobalId的构件<br>2. 点击"编辑"按钮进入编辑模式 | "选择照片"按钮应保持启用状态（如果构件有GlobalId） | | |
| 3. 点击"取消"退出编辑模式 | "选择照片"按钮状态不变（仍启用） | | |
| 4. 选择无GlobalId的构件<br>5. 进入编辑模式 | "选择照片"按钮应禁用（无GlobalId） | | |
| 6. 退出编辑模式 | "选择照片"按钮保持禁用 | | |

### 4.2 构件切换时的按钮状态
| 测试场景 | 预期结果 | 实际结果 | 问题描述 |
|---------|---------|---------|---------|
| 快速切换不同构件 | 按钮状态应及时更新，无延迟 | | |
| 从有照片构件切换到无照片构件 | "查看照片"按钮工具提示应更新 | | |
| 反复切换相同构件 | 按钮状态应保持稳定，不闪烁 | | |

## 5. 核心功能验证

### 5.1 三状态UI逻辑
| 状态 | 测试方法 | 预期显示 | 实际结果 |
|------|----------|---------|---------|
| **状态1：未选择构件** | 取消所有选择 | 显示"未选择构件"提示 | |
| **状态2：选择构件但无信息** | 选择任意构件 | 显示构件GUID和类型 | |
| **状态3：选择构件且有信息** | 输入构件编号、照片说明，添加照片 | 显示完整信息，照片预览可用 | |

### 5.2 照片功能
| 功能 | 测试步骤 | 预期结果 | 实际结果 |
|------|----------|---------|---------|
| 照片选择 | 点击"选择照片"，选择1-3张测试图片 | 照片被添加，显示预览和计数器 | |
| 照片导航 | 有多张照片时，点击左右箭头 | 照片切换，计数器更新 | |
| 照片查看 | 点击"查看照片" | 在系统默认图片查看器中打开 | |
| 照片限制 | 尝试为无GlobalId构件选择照片 | 按钮禁用，无法点击 | |

### 5.3 IFC属性显示
| 测试场景 | 预期结果 | 实际结果 |
|---------|---------|---------|
| IFC兼容构件 | 显示属性表格，可搜索、分组展开 | |
| 非IFC构件 | 显示"该构件没有IFC属性" | |
| 复杂IFC构件（大量属性） | 属性表格可滚动，加载时间可接受 | |

### 5.4 编辑模式
| 功能 | 测试步骤 | 预期结果 | 实际结果 |
|------|----------|---------|---------|
| 进入编辑 | 点击"编辑"按钮 | 输入框可编辑，显示保存/取消按钮 | |
| 保存修改 | 修改后点击"保存" | 修改被保存，返回查看模式 | |
| 取消修改 | 修改后点击"取消" | 修改被丢弃，返回查看模式 | |
| 切换构件时 | 编辑模式下选择另一构件 | 自动退出编辑模式，显示确认对话框（如有未保存更改） | |
| 未保存指示器 | 修改内容未保存 | 标题栏显示"*"符号 | |

## 6. 性能与稳定性测试

| 测试项目 | 测试方法 | 可接受标准 | 实际结果 |
|---------|---------|-----------|---------|
| 响应时间 | 选择构件到面板更新 | < 1秒 | |
| IFC属性加载 | 选择复杂IFC构件 | < 3秒 | |
| 照片预览加载 | 选择有照片的构件 | < 2秒 | |
| 内存使用 | 反复打开/关闭面板 | 内存无持续增长 | |
| 长时间运行 | 保持面板打开30分钟，频繁操作 | 无崩溃、无内存泄漏 | |

## 7. 边界条件测试

| 测试场景 | 测试方法 | 预期行为 | 实际结果 |
|---------|---------|---------|---------|
| 空选择 | 取消所有构件选择 | 返回状态1（未选择构件） | |
| 多构件选择 | 选择多个构件 | 显示第一个构件的信息 | |
| 特殊字符 | 构件编号包含：# & 中文 等 | 正确保存和显示 | |
| 长文本 | 照片说明输入长文本（100+字符） | 正确保存，界面显示正常 | |
| 大量照片 | 为构件添加10+张照片 | 照片导航正常，性能可接受 | |

## 8. 问题记录

### 8.1 发现的问题列表
| 序号 | 问题描述 | 重现步骤 | 严重程度 (高/中/低) | 截图/日志 |
|------|---------|---------|-------------------|----------|
| 1 | | | | |
| 2 | | | | |
| 3 | | | | |

### 8.2 建议改进
| 序号 | 改进建议 | 优先级 (高/中/低) | 说明 |
|------|---------|-------------------|------|
| 1 | | | |
| 2 | | | |

## 9. 总体评价

### 9.1 功能完整性
- [ ] 所有核心功能正常工作
- [ ] 三状态UI逻辑正确
- [ ] 照片功能完整
- [ ] IFC属性正确显示
- [ ] 编辑模式逻辑正确

### 9.2 用户体验
- [ ] 界面直观易用
- [ ] 响应速度可接受
- [ ] 错误提示清晰
- [ ] 键盘快捷键实用
- [ ] 工具提示有帮助

### 9.3 稳定性
- [ ] 无崩溃现象
- [ ] 无内存泄漏
- [ ] 边界条件处理合理
- [ ] 长时间运行稳定

### 9.4 总体评分 (1-5分，5分为最佳)
- **功能完整性**: ⭐⭐⭐⭐⭐
- **用户体验**: ⭐⭐⭐⭐⭐
- **稳定性**: ⭐⭐⭐⭐⭐
- **总体满意度**: ⭐⭐⭐⭐⭐

## 10. 测试结论

**测试通过标准**：所有核心功能正常工作，无严重bug，用户体验良好。

- [ ] **通过** - 插件可投入实际使用
- [ ] **有条件通过** - 需要修复次要问题后使用
- [ ] **不通过** - 存在严重问题需要修复

**最终结论**: [ ]

**下一步建议**: [ ]

---

**测试完成时间**: [ ]
**测试环境备注**: [任何特殊测试环境说明]

---
*此模板用于系统化收集用户测试反馈。请根据实际测试情况填写，截图可另存为文件并注明编号。*